<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="/static/style.css">

    </head>
<body>
<div class="geek-combat chat-app">
    <div class="left-wrap">
        <% friends = data.online_users %>
        <%- include('../partials/header', {appData: appData, userDetails: data.userDetails}); %>
        <%- include('../partials/friendList', {friends: friends}); %>
    </div>
    <div class="right-wrap">
        <%- include('../partials/chatInterface', {friend: {}}); %>
    </div>
</div>
</body>
<script src="/socket.io/socket.io.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script>
    var socket = io({transports: ['websocket'], upgrade: false});
    socket.on('client_joined', function(socket) {
        $.ajax({
            type: 'POST',
            url: "/refresh-friend-list",
            success: function (data) {
                console.log(data)
            },
            error: function (error) {
                console.log(error)
            }
        })
    });
</script>
</html>